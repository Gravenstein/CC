-- Args --

tArgs = {...}
if not tArgs[1] then
 print("Syntax: branchmine <length>")
 error()
end
i = 0
h = 2
length = tArgs[1]
l = 1
torchesNeeded = length/10 + 1
fuelNeeded = length*2 + 1

-- Functions --

mf = function()
 turtle.dig()
 turtle.forward()
 turtle.digDown()
end

-- Check conditions --

if turtle.getItemCount(1) < torchesNeeded then
 print("Not enough torches")
 print("Additional torches needed: "..torchesNeeded - turtle.getItemCount(1))
 error = true
end

if turtle.getFuelLevel() < fuelNeeded then
 print("Not enough fuel")
 print("Additional fuel needed: "..fuelNeeded - turtle.getFuelLevel())
 error = true
end

if error then
 error()
end

-- Main --

turtle.select(1)
for l = 1,length do
 mf()
 if l%10 == 0 then
  turtle.placeDown()
 end
end
if length%10 > 5 then
 turtle.placeDown()
end
turtle.turnRight()
turtle.turnRight()
for l = 2,length do
 turtle.forward()
end
turtle.down()
print("Branch complete")